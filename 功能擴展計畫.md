# NPHONE åŠŸèƒ½æ“´å±•è¨ˆç•«

## ğŸ“‹ ç¸½è¦½

æœ¬è¨ˆç•«æ¶µè“‹ 5 å¤§åŠŸèƒ½æ¨¡çµ„çš„é–‹ç™¼ï¼Œé è¨ˆå¤§å¹…æå‡ç³»çµ±çš„åŠŸèƒ½æ€§å’Œç”¨æˆ¶é«”é©—ã€‚

---

## 1ï¸âƒ£ ç®¡ç†ç«¯ UI å„ªåŒ–

### ğŸ¯ ç›®æ¨™
å°‡ç®¡ç†ç«¯é é¢å¥—ç”¨èˆ‡æœƒå“¡ç«¯ç›¸åŒçš„è¨­è¨ˆç³»çµ±ï¼Œæ‰“é€ çµ±ä¸€ä¸”å°ˆæ¥­çš„ç®¡ç†ä»‹é¢ã€‚

### ğŸ“„ æ¶‰åŠé é¢
- `admin/dashboard.html` - å„€è¡¨æ¿
- `admin/members.html` - æœƒå“¡ç®¡ç†
- `admin/member-detail.html` - æœƒå“¡è©³æƒ…
- `admin/member-new.html` - æ–°å¢æœƒå“¡
- `admin/member-edit.html` - ç·¨è¼¯æœƒå“¡
- `admin/services.html` - æœå‹™ç®¡ç†
- `admin/bookings.html` - é ç´„ç®¡ç†
- `admin/member-booking-new.html` - æ–°å¢é ç´„
- `admin/checkout.html` - çµå¸³ç®¡ç†
- `admin/business-hours.html` - ç‡Ÿæ¥­æ™‚é–“ç®¡ç†
- `admin/wallet-points.html` - å„²å€¼é‡‘/ç©åˆ†ç®¡ç†

### ğŸ¨ è¨­è¨ˆé‡é»
- ä½¿ç”¨ç›¸åŒçš„ç«ç‘°é‡‘è‰²ç³»
- å¡ç‰‡å¼å¸ƒå±€
- å„ªåŒ–è¡¨æ ¼è¨­è¨ˆ
- æ”¹é€²è¡¨å–®æ¨£å¼
- çµ±ä¸€æŒ‰éˆ•å’Œå¾½ç« 

### â±ï¸ é ä¼°æ™‚é–“
ç´„ 2-3 å°æ™‚ï¼ˆ11 å€‹é é¢ï¼‰

---

## 2ï¸âƒ£ å‹•ç•«æ•ˆæœå¢å¼·

### ğŸ¯ ç›®æ¨™
åŠ å…¥æ›´å¤šå¾®äº¤äº’å’Œå‹•ç•«æ•ˆæœï¼Œæå‡ç”¨æˆ¶é«”é©—çš„æµæš¢åº¦å’Œæ„‰æ‚…æ„Ÿã€‚

### âœ¨ è¨ˆç•«å¯¦ä½œçš„å‹•ç•«

#### é é¢ç´šå‹•ç•«
- é é¢åˆ‡æ›æ·¡å…¥æ·¡å‡º
- å¡ç‰‡é€²å…¥å‹•ç•«ï¼ˆä¾åºå‡ºç¾ï¼‰
- æ»¾å‹•è¦–å·®æ•ˆæœ

#### çµ„ä»¶ç´šå‹•ç•«
- æŒ‰éˆ•é»æ“Šæ¼£æ¼ªæ•ˆæœ
- å¡ç‰‡ hover æå‡æ•ˆæœ
- è¡¨å–®è¼¸å…¥èšç„¦å‹•ç•«
- æ•¸å­—æ»¾å‹•å‹•ç•«ï¼ˆé‡‘é¡ã€é»æ•¸ï¼‰

#### è¼‰å…¥å‹•ç•«
- éª¨æ¶å±æ”¹é€²
- è‡ªè¨‚è¼‰å…¥å‹•ç•«
- é€²åº¦æ¢å‹•ç•«

#### ç‹€æ…‹è½‰æ›
- Toast æ»‘å…¥æ»‘å‡º
- Modal å½ˆå‡ºå‹•ç•«
- ä¸‹æ‹‰é¸å–®å±•é–‹å‹•ç•«

### ğŸ“ æ–°å¢æª”æ¡ˆ
- `css/animations.css` - å‹•ç•«æ¨£å¼åº«
- `js/animation-utils.js` - å‹•ç•«å·¥å…·å‡½æ•¸

### â±ï¸ é ä¼°æ™‚é–“
ç´„ 1-2 å°æ™‚

---

## 3ï¸âƒ£ ç¥¨åˆ¸ç³»çµ±

### ğŸ¯ ç›®æ¨™
å¯¦ä½œå®Œæ•´çš„ç¥¨åˆ¸ç³»çµ±ï¼ŒåŒ…æ‹¬ç¥¨åˆ¸ç™¼æ”¾ã€ä½¿ç”¨ã€è½‰è´ˆç­‰åŠŸèƒ½ã€‚

### ğŸ“Š è³‡æ–™åº«è¨­è¨ˆ

#### ç¥¨åˆ¸ç¯„æœ¬è¡¨ (voucher_templates)
- id, name, description
- type (discount/service/gift)
- value, discount_type (percentage/fixed)
- valid_days, expiry_date
- usage_limit, terms_conditions
- is_active, created_at, updated_at

#### æœƒå“¡ç¥¨åˆ¸è¡¨ (member_vouchers)
- id, member_id, template_id
- voucher_code (å”¯ä¸€ç¢¼)
- status (available/used/expired/transferred)
- issued_at, used_at, expired_at
- booking_id (å¦‚æœå·²ä½¿ç”¨)

#### ç¥¨åˆ¸ä½¿ç”¨è¨˜éŒ„ (voucher_usage_logs)
- id, voucher_id, member_id
- action (issue/use/transfer/expire)
- booking_id, transaction_id
- notes, created_at

### ğŸ”§ åŠŸèƒ½åˆ—è¡¨

#### ç®¡ç†ç«¯
- å»ºç«‹ç¥¨åˆ¸ç¯„æœ¬
- ç™¼æ”¾ç¥¨åˆ¸çµ¦æœƒå“¡
- æŸ¥çœ‹ç¥¨åˆ¸ä½¿ç”¨çµ±è¨ˆ
- ç¥¨åˆ¸æœ‰æ•ˆæœŸç®¡ç†

#### æœƒå“¡ç«¯
- æŸ¥çœ‹æˆ‘çš„ç¥¨åˆ¸
- ä½¿ç”¨ç¥¨åˆ¸é ç´„/çµå¸³
- æŸ¥çœ‹ç¥¨åˆ¸è©³æƒ…
- ç¥¨åˆ¸ä½¿ç”¨æ­·å²

### ğŸ“ æ–°å¢æª”æ¡ˆ
- `supabase/voucher-schema.sql`
- `supabase/voucher-rls-policies.sql`
- `js/voucher.js`
- `member/vouchers.html`
- `admin/vouchers.html`
- `admin/voucher-new.html`

### â±ï¸ é ä¼°æ™‚é–“
ç´„ 3-4 å°æ™‚

---

## 4ï¸âƒ£ LINE æ¨æ’­é€šçŸ¥

### ğŸ¯ ç›®æ¨™
æ•´åˆ LINE Messaging APIï¼Œåœ¨é—œéµäº‹ä»¶ç™¼ç”Ÿæ™‚è‡ªå‹•æ¨æ’­é€šçŸ¥çµ¦æœƒå“¡ã€‚

### ğŸ“® æ¨æ’­å ´æ™¯

#### é ç´„ç›¸é—œ
- âœ… é ç´„æˆåŠŸç¢ºèª
- â° é ç´„æé†’ï¼ˆå‰ä¸€å¤©/å‰ 1 å°æ™‚ï¼‰
- âœï¸ é ç´„è®Šæ›´é€šçŸ¥
- âŒ é ç´„å–æ¶ˆé€šçŸ¥

#### äº¤æ˜“ç›¸é—œ
- ğŸ’° å„²å€¼æˆåŠŸé€šçŸ¥
- ğŸ’¸ æ¶ˆè²»æ‰£æ¬¾é€šçŸ¥
- ğŸ ç²å¾—ç©åˆ†é€šçŸ¥
- ğŸ« ç²å¾—ç¥¨åˆ¸é€šçŸ¥

#### ç³»çµ±é€šçŸ¥
- ğŸ‚ ç”Ÿæ—¥ç¥ç¦ï¼ˆå¦‚æœ‰è¨­å®šï¼‰
- ğŸ“¢ å„ªæƒ æ´»å‹•é€šçŸ¥

### ğŸ”§ æŠ€è¡“æ¶æ§‹

#### LINE Messaging API è¨­ç½®
1. ç”³è«‹ LINE Messaging API Channel
2. å–å¾— Channel Access Token
3. è¨­å®š Webhook URL
4. åŠ ç‚ºå¥½å‹æ©Ÿåˆ¶

#### å¾Œç«¯å¯¦ä½œ
- Supabase Edge Function for æ¨æ’­
- è¨Šæ¯ç¯„æœ¬ç®¡ç†
- æ¨æ’­æ’ç¨‹ç³»çµ±

#### è³‡æ–™åº«
- `line_notifications` è¡¨ï¼ˆæ¨æ’­è¨˜éŒ„ï¼‰
- `notification_templates` è¡¨ï¼ˆç¯„æœ¬ï¼‰
- `notification_settings` è¡¨ï¼ˆæœƒå“¡åå¥½ï¼‰

### ğŸ“ æ–°å¢æª”æ¡ˆ
- `supabase/edge-functions/line-notify/index.ts`
- `supabase/line-notifications-schema.sql`
- `supabase/line-notifications-rls.sql`
- `js/line-notify.js`

### âš ï¸ å‰ç½®éœ€æ±‚
- LINE Messaging API Channelï¼ˆéœ€ç”³è«‹ï¼‰
- Channel Access Tokenï¼ˆéœ€å–å¾—ï¼‰
- æœƒå“¡éœ€åŠ  LINE Bot ç‚ºå¥½å‹

### â±ï¸ é ä¼°æ™‚é–“
ç´„ 4-5 å°æ™‚ï¼ˆå«è¨­ç½®ï¼‰

---

## 5ï¸âƒ£ LINE LIFF æ·±åº¦æ•´åˆ

### ğŸ¯ ç›®æ¨™
æ·±åŒ– LIFF åŠŸèƒ½ï¼Œæä¾›æ›´åŸç”Ÿçš„ LINE å…§ä½¿ç”¨é«”é©—ã€‚

### ğŸš€ è¨ˆç•«å¯¦ä½œåŠŸèƒ½

#### LIFF åˆå§‹åŒ–å„ªåŒ–
- è‡ªå‹•åµæ¸¬ LIFF ç’°å¢ƒ
- å–å¾— LINE Profile
- å‹å–„çš„é™ç´šè™•ç†ï¼ˆé LIFF ç’°å¢ƒï¼‰

#### LIFF å°ˆå±¬åŠŸèƒ½
- **é—œé–‰è¦–çª—** - é ç´„å®Œæˆå¾Œé—œé–‰ LIFF
- **åˆ†äº«åŠŸèƒ½** - åˆ†äº«é ç´„è³‡è¨Šçµ¦æœ‹å‹
- **æƒç¢¼åŠŸèƒ½** - æƒææœƒå“¡æ¢ç¢¼
- **é–‹å•Ÿå¤–éƒ¨é€£çµ** - ä½¿ç”¨ LIFF é–‹å•Ÿ
- **å‚³é€è¨Šæ¯** - åˆ†äº«åˆ°èŠå¤©å®¤

#### æ¬Šé™ç®¡ç†
- å–å¾— email æ¬Šé™
- å–å¾— phone æ¬Šé™
- OpenID Connect æ•´åˆ

### ğŸ“ æ–°å¢æª”æ¡ˆ
- `js/liff-utils.js` - LIFF å·¥å…·å‡½æ•¸
- `liff-config.js` - LIFF é…ç½®

### ğŸ”§ éœ€è¦é…ç½®
- LIFF App IDï¼ˆéœ€åœ¨ LINE Developers å»ºç«‹ï¼‰
- Endpoint URL è¨­å®š
- æ¬Šé™ç¯„åœè¨­å®š

### â±ï¸ é ä¼°æ™‚é–“
ç´„ 2-3 å°æ™‚

---

## ğŸ“Š ç¸½è¦½èˆ‡å„ªå…ˆç´šå»ºè­°

| åŠŸèƒ½æ¨¡çµ„ | è¤‡é›œåº¦ | æ™‚é–“ | å„ªå…ˆç´š | ç‹€æ…‹ |
|---------|--------|------|-------|------|
| 1. ç®¡ç†ç«¯ UI å„ªåŒ– | â­â­ | 2-3h | ğŸ”¥ é«˜ | ğŸ”„ é€²è¡Œä¸­ |
| 2. å‹•ç•«æ•ˆæœ | â­ | 1-2h | ğŸŸ¡ ä¸­ | â³ å¾…é–‹å§‹ |
| 3. ç¥¨åˆ¸ç³»çµ± | â­â­â­ | 3-4h | ğŸŸ¢ ä¸­ä½ | â³ å¾…é–‹å§‹ |
| 4. LINE æ¨æ’­ | â­â­â­â­ | 4-5h | ğŸ”´ ä¸­é«˜ | â³ å¾…é–‹å§‹ |
| 5. LIFF æ•´åˆ | â­â­â­ | 2-3h | ğŸŸ¡ ä¸­ | â³ å¾…é–‹å§‹ |

### ğŸ¯ å»ºè­°é †åº
1. **ç®¡ç†ç«¯ UI å„ªåŒ–** â† ç¹¼çºŒ UI/UX æ”¹ç‰ˆ
2. **å‹•ç•«æ•ˆæœ** â† å®Œå–„è¦–è¦ºé«”é©—
3. **LIFF æ•´åˆ** â† æå‡ LINE ä½¿ç”¨é«”é©—
4. **LINE æ¨æ’­** â† æå‡ç”¨æˆ¶é»è‘—åº¦
5. **ç¥¨åˆ¸ç³»çµ±** â† æ“´å±•å•†æ¥­åŠŸèƒ½

---

## âš ï¸ é‡è¦æé†’

### LINE Messaging API éœ€è¦ï¼š
- âœ… LINE Business Account
- âœ… Messaging API Channel
- âœ… Channel Access Token
- âš ï¸ éœ€è¦æœƒå“¡ä¸»å‹•åŠ  Bot ç‚ºå¥½å‹æ‰èƒ½æ¨æ’­

### LINE LIFF éœ€è¦ï¼š
- âœ… LIFF Appï¼ˆåœ¨ LINE Developers Console å»ºç«‹ï¼‰
- âœ… LIFF ID
- âœ… Endpoint URLï¼ˆéœ€æ˜¯ HTTPSï¼‰

---

## ğŸš€ ç¾åœ¨é–‹å§‹å“ªä¸€å€‹ï¼Ÿ

æˆ‘å·²å»ºç«‹å®Œæ•´çš„ TODO åˆ—è¡¨ã€‚**è«‹å‘Šè¨´æˆ‘å¾å“ªå€‹é–‹å§‹ï¼š**

**A) ç®¡ç†ç«¯ UI å„ªåŒ–** - ç¹¼çºŒå®Œæˆ UI/UX æ”¹ç‰ˆ  
**B) å‹•ç•«æ•ˆæœ** - è®“ä»‹é¢æ›´ç”Ÿå‹•  
**C) ç¥¨åˆ¸ç³»çµ±** - æ–°å¢å•†æ¥­åŠŸèƒ½  
**D) LINE æ¨æ’­** - éœ€è¦å…ˆè¨­ç½® LINE Messaging API  
**E) LIFF æ•´åˆ** - éœ€è¦ LIFF App ID  

æˆ–è€…å‘Šè¨´æˆ‘æ‚¨å¸Œæœ›çš„å„ªå…ˆé †åºï¼

